define(function(require, exports, module){
	
	var ko = require("knockout");

	var $wrapper,
		$items;

	function load( _$wrapper ){

		$wrapper = _$wrapper;
		
		// load less file
		b_core.loadLess( require.toUrl('./navigator.less') );
		b_core.loadTemplate( require.toUrl('./navigator.html'), function(tpl){
			
			$wrapper.html( tpl );

			$items = $wrapper.find('ul>li');
			$items.click( toggleMenu );

			// bind user info
			ko.applyBindings( G.user, $("#UserInfo")[0]);
		} )
	}

	function toggleMenu(){
		$items.removeClass('active');
		$(this).addClass('active');
	}

	exports.load = load;
})